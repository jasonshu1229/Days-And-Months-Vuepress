---
title: 「2022」手撕JS高频面试题
date: 2022-09-07 17:20:33
permalink: /pages/7d69ea/
---

### 1.手动实现call方法

```js
/**
 * thisArg： 要改变的函数中的this指向
 * args：传递给要被执行的函数的实参信息
 * this：要被执行的函数
 */
Function.prototype._call = function(thisArg, ...args) {
  // 获取需要被执行的函数
  var fn = this;

  // 对 thisArg转成对象类型（防止传入的是非对象类型）
  thisArg = (thisArg !== null && this !== undefined) ? Object(thisArg) : window;

  // 调用需要被执行的函数
  thisArg.fn = fn;
  var result = this.fn(...args);
  delete thisArg.fn;

  // 将结果返回
  return result;
}
```

**测试用例：**

```js
function sum(num1, num2) {
  console.log(this, num1, num2)
  return num1 + num2;
}

function foo() {
  console.log(this);
}

var result = sum._call('abc', 10, 20); // String {'abc', fn: ƒ} 20 30
foo._call(undefined); // window
```

### 2.手动实现apply方法

```js
/**
 * thisArg： 要改变的函数中的this指向
 * argArray：传递给要被执行的函数的实参信息(数组形式)
 * this：要被执行的函数
 */
Function.prototype._apply = function(thisArg, argArray) {
  // 获取需要被执行的函数
  var fn = this;

  // 处理绑定的thisArg
  thisArg = (thisArg !== null && thisArg !== undefined) ? Object(thisArg) : window;

  // 执行函数
  thisArg.fn = fn;

  // 防止不传第二个参数时，argArray 为undefined报错
  argArray = argArray || []; 
  var result = thisArg.fn(...argArray);
  delete thisArg.fn;

  return result;
}
```

**测试用例：**
```js
function sum(num1, num2) {
  return num1 + num2;
}

function foo(num) {
  return num;
}

var result = sum._apply("abc", [20, 30]); // String {'abc', fn: ƒ} 50
var result2 = foo._apply("abc", [20]); // String {'abc', fn: ƒ} 20
```

### 3.手动实现bind方法

```JS
Function.prototype._bind = function(thisArg, ...argArray) {
  // 获取到需要被执行的函数
  var fn = this;

  // 处理绑定的thisArg
  thisArg = (thisArg !== null && thisArg !== undefined) ? Object(thisArg) : window;

  return function(...args) {
    // 将函数放到thisArg中调用
    thisArg.fn = fn;
    // 合并参数
    var finalArgs = [...argArray, ...args];
    var result = thisArg.fn(...finalArgs);
    delete thisArg.fn;

    return result;
  }
}
```

**测试用例：**
```js
function foo() {
  console.log("foo被执行", this);
  return 20;
}

function sum(num1, num2, num3, num4) {
  console.log(num1, num2, num3, num4);
}

var bar = foo.hybind("abc"); // foo被执行 String {'abc', fn: ƒ}
var result = bar(); // 20

var newSum = sum.hybind("abc", 10, 20); // 10 20 30 40
var result = newSum(30, 40);
```
